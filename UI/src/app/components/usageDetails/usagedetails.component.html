
<app-navbar></app-navbar> 
<div class="container">


<div id="report" >

    
  <button id ='sync-button' mat-raised-button color="primary" (click)="openModal()">
    SYNC <mat-icon>sync</mat-icon>
  </button>
  <button mat-raised-button color="primary" (click)="openShareDialog()" *ngIf="usageDetails != null" >Share</button>

    <div *ngIf="isLoading" class="loading-spinner">
      <mat-spinner></mat-spinner>
    </div>

    <!-- Div where Handlebars will insert the generated content -->
    <div id="display" *ngIf="display">
    </div>


    <div class="modal" *ngIf="showModal">
        <!-- <p>inside showModal</p> -->
        <div class="modal-content">
            <span class="close" (click)="closeModal()">&times;</span>
            <h2>Select Time Interval</h2>

            <mat-slide-toggle [(ngModel)]="isDateRangeSelected" (change)="onToggleChange($event)">
                Select Date Range
              </mat-slide-toggle>
        
              <div *ngIf="isDateRangeSelected">
            <mat-form-field>
                <mat-label>Enter a date range</mat-label>
                <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
                  <input matStartDate formControlName="start" placeholder="Start date">
                  <input matEndDate formControlName="end" placeholder="End date">
                </mat-date-range-input>
               
                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-date-range-picker #picker></mat-date-range-picker>
              
               

              </mat-form-field>
              
              <button (click) = "callApi()">Submit </button>
              </div>

            <div *ngIf="!isDateRangeSelected">
            <button (click)="selectOption(1)">Last 1 Hour</button>
            <button (click)="selectOption(2)">Last 2 Hours</button>
            <button (click)="selectOption(3)">Last 3 Hours</button>
            </div>

            
          
            
     
        </div>


        
    </div>


    <div *ngIf="showHour">
      <div *ngIf="summaryData.length > 0" class="summary-table">
 
        <table class="table">
          <thead>
            <tr>
              <th>Service Name</th>
              <th>Publisher</th>
              <th>Total Cost (â‚¹)</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let data of summaryData">
              <td>{{ data.serviceName }}</td>
              <td>{{ data.publisher }}</td>
              <td>{{ data.totalCost | number: '1.2-2' }}</td>
            </tr>
          </tbody>
        </table>
      </div>
  </div>

      
   

    <div class="share">

    </div>
    <!-- <button (click)="getdownload()" *ngIf="display">Download</button> -->
    
    
</div>




</div>